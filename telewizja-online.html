<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <title>MEGA TEST IPTV – TWOJA + FREE-TV</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    body {background:#000;color:#fff;font-family:Arial;margin:0;padding:20px;}
    h1 {text-align:center;color:#0f0;font-size:40px;margin:30px 0;}
    .playlist {margin:40px 0;background:#111;padding:20px;border-radius:15px;}
    .playlist h2 {color:#ff2d95;text-align:center;}
    .players {display:grid;grid-template-columns:repeat(auto-fit,minmax(500px,1fr));gap:20px;}
    .player-box {background:#222;padding:15px;border-radius:10px;text-align:center;}
    .player-box h3 {color:#00ff9d;margin:0 0 10px;}
    video, div[id^="jw"], div[id^="flus"] {width:100%;height:400px;background:#000;border-radius:8px;}
    .status {margin-top:10px;font-size:16px;}
    .ok {color:#0f0;}
    .fail {color:#f00;}
  </style>
</head>
<body>

<h1>MEGA TEST IPTV – TWOJA PLAYLISTA + FREE-TV</h1>
<p style="text-align:center;font-size:22px;">Test na 7 playerach – zobacz, co działa</p>
<a href="index.html" style="display:block;text-align:center;color:#0ff;font-size:20px;margin:20px;">← Powrót do strony głównej</a>

<!-- TWOJA PLAYLISTA Z GITHUB -->
<div class="playlist">
  <h2>1. TWOJA PLAYLISTA (z GitHub)</h2>
  <div class="players">
    <div class="player-box"><h3>JW Player</h3><div id="jw1"></div><div class="status" id="s11">Ładowanie...</div></div>
    <div class="player-box"><h3>Flussonic</h3><div id="flus1"></div><div class="status" id="s21">Ładowanie...</div></div>
    <div class="player-box"><h3>Video.js</h3><video id="vjs1" class="video-js"></video><div class="status" id="s31">Ładowanie...</div></div>
    <div class="player-box"><h3>Plyr</h3><video id="plyr1"></video><div class="status" id="s41">Ładowanie...</div></div>
    <div class="player-box"><h3>HLS.js</h3><video id="hls1" controls></video><div class="status" id="s51">Ładowanie...</div></div>
    <div class="player-box"><h3>HTML5</h3><video id="html1" controls></video><div class="status" id="s61">Ładowanie...</div></div>
    <div class="player-box"><h3>Castr</h3><div id="castr1"></div><div class="status" id="s71">Ładowanie...</div></div>
  </div>
</div>

<!-- FREE-TV PLAYLISTA -->
<div class="playlist">
  <h2>2. FREE-TV/IPTV (z GitHub Free-TV)</h2>
  <p>Free TV channels from the world (Plex, Pluto, Roku, Samsung TV Plus)</p>
  <div class="players">
    <div class="player-box"><h3>JW Player</h3><div id="jw2"></div><div class="status" id="s12">Ładowanie...</div></div>
    <div class="player-box"><h3>Flussonic</h3><div id="flus2"></div><div class="status" id="s22">Ładowanie...</div></div>
    <div class="player-box"><h3>Video.js</h3><video id="vjs2" class="video-js"></video><div class="status" id="s32">Ładowanie...</div></div>
    <div class="player-box"><h3>Plyr</h3><video id="plyr2"></video><div class="status" id="s42">Ładowanie...</div></div>
    <div class="player-box"><h3>HLS.js</h3><video id="hls2" controls></video><div class="status" id="s52">Ładowanie...</div></div>
    <div class="player-box"><h3>HTML5</h3><video id="html2" controls></video><div class="status" id="s62">Ładowanie...</div></div>
    <div class="player-box"><h3>Castr</h3><div id="castr2"></div><div class="status" id="s72">Ładowanie...</div></div>
  </div>
</div>

<script src="https://cdn.jwplayer.com/libraries/IDzF9Zmk.js"></script>
<script src="https://flussonic.com/public/player/v2/player.js"></script>
<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.15"></script>
<script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
<script src="https://castr.com/hlsplayer/js/player.js"></script>

<script>
  // Funkcja testu dla jednej playlisty
  function testPlaylist(url, prefix) {
    fetch(url + '?t=' + Date.now())
      .then(r => r.text())
      .then(text => {
        const lines = text.split('\n');
        let firstUrl = '';
        lines.forEach(line => {
          line = line.trim();
          if (line.includes('.m3u8')) {
            firstUrl = line.startsWith('http') ? line : 'https://security.freefreaks.top/' + line;
            return;
          }
        });

        // Test JW Player
        try {
          jwplayer(prefix + 'jw').setup({file: firstUrl, width: "100%", height: "400", autostart: true});
          document.getElementById(prefix + 's1').innerHTML = '<span class="ok">DZIAŁA</span>';
        } catch(e) { document.getElementById(prefix + 's1').innerHTML = '<span class="fail">BŁĄD</span>'; }

        // Test Flussonic
        try {
          new FlussonicPlayer('#' + prefix + 'flus', {url: firstUrl, autoplay: true});
          document.getElementById(prefix + 's2').innerHTML = '<span class="ok">DZIAŁA</span>';
        } catch(e) { document.getElementById(prefix + 's2').innerHTML = '<span class="fail">BŁĄD</span>'; }

        // Test Video.js
        try {
          const vjs = videojs(prefix + 'vjs', {fluid: true, liveui: true});
          if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(firstUrl);
            hls.attachMedia(vjs.tech_.el_);
          }
          document.getElementById(prefix + 's3').innerHTML = '<span class="ok">DZIAŁA</span>';
        } catch(e) { document.getElementById(prefix + 's3').innerHTML = '<span class="fail">BŁĄD</span>'; }

        // Test Plyr
        try {
          new Plyr('#' + prefix + 'plyr', {autoplay: true});
          if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(firstUrl);
            hls.attachMedia(document.getElementById(prefix + 'plyr'));
          }
          document.getElementById(prefix + 's4').innerHTML = '<span class="ok">DZIAŁA</span>';
        } catch(e) { document.getElementById(prefix + 's4').innerHTML = '<span class="fail">BŁĄD</span>'; }

        // Test HLS.js
        try {
          const video = document.getElementById(prefix + 'hls');
          if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(firstUrl);
            hls.attachMedia(video);
          }
          document.getElementById(prefix + 's5').innerHTML = '<span class="ok">DZIAŁA</span>';
        } catch(e) { document.getElementById(prefix + 's5').innerHTML = '<span class="fail">BŁĄD</span>'; }

        // Test HTML5
        try {
          document.getElementById(prefix + 'html').src = firstUrl;
          document.getElementById(prefix + 's6').innerHTML = '<span class="ok">DZIAŁA</span>';
        } catch(e) { document.getElementById(prefix + 's6').innerHTML = '<span class="fail">BŁĄD</span>'; }

        // Test Castr
        try {
          new CastrPlayer('#' + prefix + 'castr', {url: firstUrl, autoplay: true});
          document.getElementById(prefix + 's7').innerHTML = '<span class="ok">DZIAŁA</span>';
        } catch(e) { document.getElementById(prefix + 's7').innerHTML = '<span class="fail">BŁĄD</span>'; }
      });
  }

  // Test Twojej playlisty
  testPlaylist('playlist.m3u', '1_');

  // Test Free-TV playlisty
  testPlaylist('https://raw.githubusercontent.com/Free-TV/IPTV/master/playlist.m3u8', '2_');
</script>

</body>
</html>
