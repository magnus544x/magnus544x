<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <title>Moje Kanały TV</title>
  <style>
    body {background:#000;color:#fff;font-family:Arial;margin:0;padding:20px;}
    h1 {text-align:center;}
    .channel {margin:15px 0;text-align:center;}
    .channel button {background:#222;color:#fff;padding:15px;font-size:18px;width:80%;border:none;cursor:pointer;}
    .channel button:hover {background:#444;}
    #player {width:90%;max-width:1000px;margin:20px auto;display:block;}
  </style>
</head>
<body>
  <h1>Moje Kanały TV</h1>
  <div id="list"></div>
  <video id="player" class="video-js vjs-default-skin" controls autoplay width="640" height="360"></video>

  <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
  <script>
    const m3u = 'https://security.freefreaks.top/playlist.m3u';
    const player = videojs('player', {fluid: true});

    fetch(m3u + '?t=' + Date.now())
      .then(r => r.text())
      .then(text => {
        const lines = text.split('\n');
        const container = document.getElementById('list');
        let name = 'Kanał';

        lines.forEach(line => {
          line = line.trim();
          if (line.startsWith('#EXTINF:')) {
            name = line.includes('tvg-name="') ? line.split('tvg-name="')[1].split('"')[0] : line.split(',').pop();
          } else if (line && line.includes('.m3u8')) {
            const btn = document.createElement('div');
            btn.className = 'channel';
            btn.innerHTML = `<button onclick="play('${line}')">${name}</button>`;
            container.appendChild(btn);
          }
        });
      });

    function play(url) {
      player.src({type: 'application/x-mpegURL', src: url});
      player.play();
      window.scrollTo(0, document.getElementById('player').offsetTop);
    }
  </script>
</body>
</html>
