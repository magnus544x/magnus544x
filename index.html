<!DOCTYPE html>
<html>
<head>
  <title>Moje KanaÅ‚y TV</title>
  <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
  <style>
    body{background:#000;color:#fff;font-family:Arial;text-align:center;}
    #channels button{margin:8px;padding:12px;font-size:16px;background:#222;border:1px solid #555;cursor:pointer;}
    #channels button:hover{background:#444;}
  </style>
</head>
<body>
  <h1>Moje KanaÅ‚y TV</h1>
  <div id="channels"></div>
  <br>
  <video id="player" class="video-js vjs-default-skin" controls width="900" height="506"></video>

  <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
  <script>
    const source = 'https://security.freefreaks.top/playlist.m3u';
    let player = videojs('player');

    function loadPlaylist() {
      fetch(source + '?t=' + Date.now())
        .then(r => r.text())
        .then(text => {
          const lines = text.split('\n');
          const div = document.getElementById('channels');
          div.innerHTML = '<button onclick="loadPlaylist()">ðŸ”„ OdÅ›wieÅ¼ listÄ™</button><br><br>';
          let name = 'Nieznany';
          for (let line of lines) {
            if (line.startsWith('#EXTINF:')) {
              name = line.split('tvg-name="')[1]?.split('"')[0] || line.split(',').pop().trim();
            } else if (line.trim() && line.includes('.m3u8')) {
              let btn = document.createElement('button');
              btn.textContent = name;
              btn.onclick = () => player.src({src: line.trim(), type: 'application/x-mpegURL'});
              div.appendChild(btn);
            }
          }
        });
    }

    loadPlaylist();
    setInterval(loadPlaylist, 4*60*60*1000); // co 4h
  </script>
</body>
</html>
